import{ag as Ie,R as H,T as M,D as A,ah as B,p,ai as _,aj as Oe,w as v,ak as O,al as ue,e as x,am as j,an as Ce,I as de,ao as Le,ap as z,q as C,h as ke,g as Me,f as he,k as U,Y as pe,d as w,v as fe,aq as Re,ar as ze,c as ge,b as Z,i as me,u as We,a3 as Ue,l as je,P as Ve}from"./useSceneSize-D8MHsYII.js";import{j as L}from"./jsx-runtime-D_zvdyIk.js";import{r as k}from"./iframe--upQc8V5.js";import{A as $e,B as J,C as ee,a as Xe}from"./CanvasTextGenerator-C-_YMxA_.js";import"./preload-helper-Dp1pzeXC.js";import"./CanvasPool-4xSeha60.js";class Ae extends $e{constructor(e,t){super();const{textures:r,data:i}=e;Object.keys(i.pages).forEach(n=>{const a=i.pages[parseInt(n,10)],o=r[a.id];this.pages.push({texture:o})}),Object.keys(i.chars).forEach(n=>{const a=i.chars[n],{frame:o,source:u,rotate:c}=r[a.page],d=Ie.transformRectCoords(a,o,c,new H),l=new M({frame:d,orig:new H(0,0,a.width,a.height),source:u,rotate:c});this.chars[n]={id:n.codePointAt(0),xOffset:a.xOffset,yOffset:a.yOffset,xAdvance:a.xAdvance,kerning:a.kerning??{},texture:l}}),this.baseRenderedFontSize=i.fontSize,this.baseMeasurementFontSize=i.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:i.fontSize},this.baseLineOffset=i.baseLineOffset,this.lineHeight=i.lineHeight,this.fontFamily=i.fontFamily,this.distanceField=i.distanceField??{type:"none",range:0},this.url=t}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{texture:t}=this.pages[e];t.destroy(!0)}this.pages=null}static install(e){J.install(e)}static uninstall(e){J.uninstall(e)}}const $={test(s){return typeof s=="string"&&s.startsWith("info face=")},parse(s){const e=s.match(/^[a-z]+\s+.+$/gm),t={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const l in e){const h=e[l].match(/^[a-z]+/gm)[0],f=e[l].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),g={};for(const m in f){const y=f[m].split("="),b=y[0],P=y[1].replace(/"/gm,""),Q=parseFloat(P),Ee=isNaN(Q)?P:Q;g[b]=Ee}t[h].push(g)}const r={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[i]=t.info,[n]=t.common,[a]=t.distanceField??[];a&&(r.distanceField={range:parseInt(a.distanceRange,10),type:a.fieldType}),r.fontSize=parseInt(i.size,10),r.fontFamily=i.face,r.lineHeight=parseInt(n.lineHeight,10);const o=t.page;for(let l=0;l<o.length;l++)r.pages.push({id:parseInt(o[l].id,10)||0,file:o[l].file});const u={};r.baseLineOffset=r.lineHeight-parseInt(n.base,10);const c=t.char;for(let l=0;l<c.length;l++){const h=c[l],f=parseInt(h.id,10);let g=h.letter??h.char??String.fromCharCode(f);g==="space"&&(g=" "),u[f]=g,r.chars[g]={id:f,page:parseInt(h.page,10)||0,x:parseInt(h.x,10),y:parseInt(h.y,10),width:parseInt(h.width,10),height:parseInt(h.height,10),xOffset:parseInt(h.xoffset,10),yOffset:parseInt(h.yoffset,10),xAdvance:parseInt(h.xadvance,10),kerning:{}}}const d=t.kerning||[];for(let l=0;l<d.length;l++){const h=parseInt(d[l].first,10),f=parseInt(d[l].second,10),g=parseInt(d[l].amount,10);r.chars[u[f]].kerning[u[h]]=g}return r}},te={test(s){const e=s;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(s){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},t=s.getElementsByTagName("info")[0],r=s.getElementsByTagName("common")[0],i=s.getElementsByTagName("distanceField")[0];i&&(e.distanceField={type:i.getAttribute("fieldType"),range:parseInt(i.getAttribute("distanceRange"),10)});const n=s.getElementsByTagName("page"),a=s.getElementsByTagName("char"),o=s.getElementsByTagName("kerning");e.fontSize=parseInt(t.getAttribute("size"),10),e.fontFamily=t.getAttribute("face"),e.lineHeight=parseInt(r.getAttribute("lineHeight"),10);for(let c=0;c<n.length;c++)e.pages.push({id:parseInt(n[c].getAttribute("id"),10)||0,file:n[c].getAttribute("file")});const u={};e.baseLineOffset=e.lineHeight-parseInt(r.getAttribute("base"),10);for(let c=0;c<a.length;c++){const d=a[c],l=parseInt(d.getAttribute("id"),10);let h=d.getAttribute("letter")??d.getAttribute("char")??String.fromCharCode(l);h==="space"&&(h=" "),u[l]=h,e.chars[h]={id:l,page:parseInt(d.getAttribute("page"),10)||0,x:parseInt(d.getAttribute("x"),10),y:parseInt(d.getAttribute("y"),10),width:parseInt(d.getAttribute("width"),10),height:parseInt(d.getAttribute("height"),10),xOffset:parseInt(d.getAttribute("xoffset"),10),yOffset:parseInt(d.getAttribute("yoffset"),10),xAdvance:parseInt(d.getAttribute("xadvance"),10),kerning:{}}}for(let c=0;c<o.length;c++){const d=parseInt(o[c].getAttribute("first"),10),l=parseInt(o[c].getAttribute("second"),10),h=parseInt(o[c].getAttribute("amount"),10);e.chars[u[l]].kerning[u[d]]=h}return e}},se={test(s){return typeof s=="string"&&s.includes("<font>")?te.test(A.get().parseXML(s)):!1},parse(s){return te.parse(A.get().parseXML(s))}},Ye=[".xml",".fnt"],De={extension:{type:p.CacheParser,name:"cacheBitmapFont"},test:s=>s instanceof Ae,getCacheableAssets(s,e){const t={};return s.forEach(r=>{t[r]=e,t[`${r}-bitmap`]=e}),t[`${e.fontFamily}-bitmap`]=e,t}},Ge={extension:{type:p.LoadParser,priority:B.Normal},name:"loadBitmapFont",id:"bitmap-font",test(s){return Ye.includes(_.extname(s).toLowerCase())},async testParse(s){return $.test(s)||se.test(s)},async parse(s,e,t){const r=$.test(s)?$.parse(s):se.parse(s),{src:i}=e,{pages:n}=r,a=[],o=r.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let l=0;l<n.length;++l){const h=n[l].file;let f=_.join(_.dirname(i),h);f=Oe(f,i),a.push({src:f,data:o})}const u=await t.load(a),c=a.map(l=>u[l.src]);return new Ae({data:r,textures:c},i)},async load(s,e){return await(await A.get().fetch(s)).text()},async unload(s,e,t){await Promise.all(s.pages.map(r=>t.unload(r.texture.source._sourceOrigin))),s.destroy()}};class He{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<t;r++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const Ne={extension:{type:p.CacheParser,name:"cacheTextureArray"},test:s=>Array.isArray(s)&&s.every(e=>e instanceof M),getCacheableAssets:(s,e)=>{const t={};return s.forEach(r=>{e.forEach((i,n)=>{t[r+(n===0?"":n+1)]=i})}),t}};async function ye(s){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=s});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(s)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const qe={extension:{type:p.DetectionParser,priority:1},test:async()=>ye("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async s=>[...s,"avif"],remove:async s=>s.filter(e=>e!=="avif")},re=["png","jpg","jpeg"],Ke={extension:{type:p.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async s=>[...s,...re],remove:async s=>s.filter(e=>!re.includes(e))},Qe="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function V(s){return Qe?!1:document.createElement("video").canPlayType(s)!==""}const Ze={extension:{type:p.DetectionParser,priority:0},test:async()=>V("video/mp4"),add:async s=>[...s,"mp4","m4v"],remove:async s=>s.filter(e=>e!=="mp4"&&e!=="m4v")},Je={extension:{type:p.DetectionParser,priority:0},test:async()=>V("video/ogg"),add:async s=>[...s,"ogv"],remove:async s=>s.filter(e=>e!=="ogv")},et={extension:{type:p.DetectionParser,priority:0},test:async()=>V("video/webm"),add:async s=>[...s,"webm"],remove:async s=>s.filter(e=>e!=="webm")},tt={extension:{type:p.DetectionParser,priority:0},test:async()=>ye("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async s=>[...s,"webp"],remove:async s=>s.filter(e=>e!=="webp")},xe=class W{constructor(){this.loadOptions={...W.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,r)=>(this._parsersValidated=!1,e[t]=r,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const r={promise:null,parser:null};return r.promise=(async()=>{var a,o;let i=null,n=null;if((t.parser||t.loadParser)&&(n=this._parserHash[t.parser||t.loadParser],t.loadParser&&v(`[Assets] "loadParser" is deprecated, use "parser" instead for ${e}`),n||v(`[Assets] specified load parser "${t.parser||t.loadParser}" not found while loading ${e}`)),!n){for(let u=0;u<this.parsers.length;u++){const c=this.parsers[u];if(c.load&&((a=c.test)!=null&&a.call(c,e,t,this))){n=c;break}}if(!n)return v(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await n.load(e,t,this),r.parser=n;for(let u=0;u<this.parsers.length;u++){const c=this.parsers[u];c.parse&&c.parse&&await((o=c.testParse)==null?void 0:o.call(c,i,t,this))&&(i=await c.parse(i,t,this)||i,r.parser=c)}return i})(),r}async load(e,t){this._parsersValidated||this._validateParsers();const r=typeof t=="function"?{...W.defaultOptions,...this.loadOptions,onProgress:t}:{...W.defaultOptions,...this.loadOptions,...t||{}},{onProgress:i,onError:n,strategy:a,retryCount:o,retryDelay:u}=r;let c=0;const d={},l=ue(e),h=O(e,m=>({alias:[m],src:m,data:{}})),f=h.reduce((m,y)=>m+(y.progressSize||1),0),g=h.map(async m=>{const y=_.toAbsolute(m.src);d[m.src]||(await this._loadAssetWithRetry(y,m,{onProgress:i,onError:n,strategy:a,retryCount:o,retryDelay:u},d),c+=m.progressSize||1,i&&i(c/f))});return await Promise.all(g),l?d[h[0].src]:d}async unload(e){const r=O(e,i=>({alias:[i],src:i})).map(async i=>{var o,u;const n=_.toAbsolute(i.src),a=this.promiseCache[n];if(a){const c=await a.promise;delete this.promiseCache[n],await((u=(o=a.parser)==null?void 0:o.unload)==null?void 0:u.call(o,c,i,this))}});await Promise.all(r)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name||e.id).reduce((e,t)=>(!t.name&&!t.id?v("[Assets] parser should have an id"):(e[t.name]||e[t.id])&&v(`[Assets] parser id conflict "${t.id}"`),e[t.name]=t,t.id&&(e[t.id]=t),e),{})}async _loadAssetWithRetry(e,t,r,i){let n=0;const{onError:a,strategy:o,retryCount:u,retryDelay:c}=r,d=l=>new Promise(h=>setTimeout(h,l));for(;;)try{this.promiseCache[e]||(this.promiseCache[e]=this._getLoadPromiseAndParser(e,t)),i[t.src]=await this.promiseCache[e].promise;return}catch(l){delete this.promiseCache[e],delete i[t.src],n++;const h=o!=="retry"||n>u;if(o==="retry"&&!h){a&&a(l,t),await d(c);continue}if(o==="skip"){a&&a(l,t);return}throw a&&a(l,t),new Error(`[Loader.load] Failed to load ${e}.
${l}`)}}};xe.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};let st=xe;function T(s,e){if(Array.isArray(e)){for(const t of e)if(s.startsWith(`data:${t}`))return!0;return!1}return s.startsWith(`data:${e}`)}function E(s,e){const t=s.split("?")[0],r=_.extname(t).toLowerCase();return Array.isArray(e)?e.includes(r):r===e}const rt=".json",it="application/json",nt={extension:{type:p.LoadParser,priority:B.Low},name:"loadJson",id:"json",test(s){return T(s,it)||E(s,rt)},async load(s){return await(await A.get().fetch(s)).json()}},at=".txt",ot="text/plain",lt={name:"loadTxt",id:"text",extension:{type:p.LoadParser,priority:B.Low,name:"loadTxt"},test(s){return T(s,ot)||E(s,at)},async load(s){return await(await A.get().fetch(s)).text()}},ct=["normal","bold","100","200","300","400","500","600","700","800","900"],ut=[".ttf",".otf",".woff",".woff2"],dt=["font/ttf","font/otf","font/woff","font/woff2"],ht=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function pt(s){const e=_.extname(s),i=_.basename(s,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1));let n=i.length>0;for(const o of i)if(!o.match(ht)){n=!1;break}let a=i.join(" ");return n||(a=`"${a.replace(/[\\"]/g,"\\$&")}"`),a}const ft=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function gt(s){return ft.test(s)?s:encodeURI(s)}const mt={extension:{type:p.LoadParser,priority:B.Low},name:"loadWebFont",id:"web-font",test(s){return T(s,dt)||E(s,ut)},async load(s,e){var r,i,n;const t=A.get().getFontFaceSet();if(t){const a=[],o=((r=e.data)==null?void 0:r.family)??pt(s),u=((n=(i=e.data)==null?void 0:i.weights)==null?void 0:n.filter(d=>ct.includes(d)))??["normal"],c=e.data??{};for(let d=0;d<u.length;d++){const l=u[d],h=new FontFace(o,`url(${gt(s)})`,{...c,weight:l});await h.load(),t.add(h),a.push(h)}return x.has(`${o}-and-url`)?x.get(`${o}-and-url`).entries.push({url:s,faces:a}):x.set(`${o}-and-url`,{entries:[{url:s,faces:a}]}),a.length===1?a[0]:a}return v("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(s){const e=Array.isArray(s)?s:[s],t=e[0].family,r=x.get(`${t}-and-url`),i=r.entries.find(n=>n.faces.some(a=>e.indexOf(a)!==-1));i.faces=i.faces.filter(n=>e.indexOf(n)===-1),i.faces.length===0&&(r.entries=r.entries.filter(n=>n!==i)),e.forEach(n=>{A.get().getFontFaceSet().delete(n)}),r.entries.length===0&&x.remove(`${t}-and-url`)}};function q(s,e=1){var r;const t=(r=j.RETINA_PREFIX)==null?void 0:r.exec(s);return t?parseFloat(t[1]):e}function K(s,e,t){s.label=t,s._sourceOrigin=t;const r=new M({source:s,label:t}),i=()=>{delete e.promiseCache[t],x.has(t)&&x.remove(t)};return r.source.once("destroy",()=>{e.promiseCache[t]&&(v("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),i())}),r.once("destroy",()=>{s.destroyed||(v("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())}),r}const At=".svg",yt="image/svg+xml",xt={extension:{type:p.LoadParser,priority:B.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(s){return T(s,yt)||E(s,At)},async load(s,e,t){var r;return((r=e.data)==null?void 0:r.parseAsGraphicsContext)??this.config.parseAsGraphicsContext?vt(s):bt(s,e,t,this.config.crossOrigin)},unload(s){s.destroy(!0)}};async function bt(s,e,t,r){var y,b,P;const i=await A.get().fetch(s),n=A.get().createImage();n.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await i.text())}`,n.crossOrigin=r,await n.decode();const a=((y=e.data)==null?void 0:y.width)??n.width,o=((b=e.data)==null?void 0:b.height)??n.height,u=((P=e.data)==null?void 0:P.resolution)||q(s),c=Math.ceil(a*u),d=Math.ceil(o*u),l=A.get().createCanvas(c,d),h=l.getContext("2d");h.imageSmoothingEnabled=!0,h.imageSmoothingQuality="high",h.drawImage(n,0,0,a*u,o*u);const{parseAsGraphicsContext:f,...g}=e.data??{},m=new de({resource:l,alphaMode:"premultiply-alpha-on-upload",resolution:u,...g});return K(m,t,s)}async function vt(s){const t=await(await A.get().fetch(s)).text(),r=new Ce;return r.svg(t),r}const wt=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let F=null,N=class{constructor(){F||(F=URL.createObjectURL(new Blob([wt],{type:"application/javascript"}))),this.worker=new Worker(F)}};N.revokeObjectURL=function(){F&&(URL.revokeObjectURL(F),F=null)};const _t=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let S=null;class be{constructor(){S||(S=URL.createObjectURL(new Blob([_t],{type:"application/javascript"}))),this.worker=new Worker(S)}}be.revokeObjectURL=function(){S&&(URL.revokeObjectURL(S),S=null)};let ie=0,X;class Pt{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new N;t.addEventListener("message",r=>{t.terminate(),N.revokeObjectURL(),e(r.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e,t){var r;return this._run("loadImageBitmap",[e,(r=t==null?void 0:t.data)==null?void 0:r.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){X===void 0&&(X=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<X&&(this._createdWorkers++,e=new be().worker,e.addEventListener("message",t=>{this._complete(t.data),this._returnWorker(t.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),this._resolveHash[e.uuid]=null}async _run(e,t){await this._initWorkers();const r=new Promise((i,n)=>{this._queue.push({id:e,arguments:t,resolve:i,reject:n})});return this._next(),r}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const t=this._queue.pop(),r=t.id;this._resolveHash[ie]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:ie++,id:r})}reset(){this._workerPool.forEach(e=>e.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:e})=>{e==null||e(new Error("WorkerManager destroyed"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}const ne=new Pt,Ft=[".jpeg",".jpg",".png",".webp",".avif"],St=["image/jpeg","image/png","image/webp","image/avif"];async function Bt(s,e){var i;const t=await A.get().fetch(s);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${s}: ${t.status} ${t.statusText}`);const r=await t.blob();return((i=e==null?void 0:e.data)==null?void 0:i.alphaMode)==="premultiplied-alpha"?createImageBitmap(r,{premultiplyAlpha:"none"}):createImageBitmap(r)}const ve={name:"loadTextures",id:"texture",extension:{type:p.LoadParser,priority:B.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(s){return T(s,St)||E(s,Ft)},async load(s,e,t){var n;let r=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await ne.isImageBitmapSupported()?r=await ne.loadImageBitmap(s,e):r=await Bt(s,e):r=await new Promise((a,o)=>{r=A.get().createImage(),r.crossOrigin=this.config.crossOrigin,r.src=s,r.complete?a(r):(r.onload=()=>{a(r)},r.onerror=o)});const i=new de({resource:r,alphaMode:"premultiply-alpha-on-upload",resolution:((n=e.data)==null?void 0:n.resolution)||q(s),...e.data});return K(i,t,s)},unload(s){s.destroy(!0)}},Tt=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let Y,D;function Et(s,e,t){t===void 0&&!e.startsWith("data:")?s.crossOrigin=Ot(e):t!==!1&&(s.crossOrigin=typeof t=="string"?t:"anonymous")}function It(s){return new Promise((e,t)=>{s.addEventListener("canplaythrough",r),s.addEventListener("error",i),s.load();function r(){n(),e()}function i(a){n(),t(a)}function n(){s.removeEventListener("canplaythrough",r),s.removeEventListener("error",i)}})}function Ot(s,e=globalThis.location){if(s.startsWith("data:"))return"";e||(e=globalThis.location);const t=new URL(s,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function Ct(){const s=[],e=[];for(const t of Tt){const r=z.MIME_TYPES[t.substring(1)]||`video/${t.substring(1)}`;V(r)&&(s.push(t),e.includes(r)||e.push(r))}return{validVideoExtensions:s,validVideoMime:e}}const Lt={name:"loadVideo",id:"video",extension:{type:p.LoadParser,name:"loadVideo"},test(s){if(!Y||!D){const{validVideoExtensions:r,validVideoMime:i}=Ct();Y=r,D=i}const e=T(s,D),t=E(s,Y);return e||t},async load(s,e,t){var u,c;const r={...z.defaultOptions,resolution:((u=e.data)==null?void 0:u.resolution)||q(s),alphaMode:((c=e.data)==null?void 0:c.alphaMode)||await Le(),...e.data},i=document.createElement("video"),n={preload:r.autoLoad!==!1?"auto":void 0,"webkit-playsinline":r.playsinline!==!1?"":void 0,playsinline:r.playsinline!==!1?"":void 0,muted:r.muted===!0?"":void 0,loop:r.loop===!0?"":void 0,autoplay:r.autoPlay!==!1?"":void 0};Object.keys(n).forEach(d=>{const l=n[d];l!==void 0&&i.setAttribute(d,l)}),r.muted===!0&&(i.muted=!0),Et(i,s,r.crossorigin);const a=document.createElement("source");let o;if(r.mime)o=r.mime;else if(s.startsWith("data:"))o=s.slice(5,s.indexOf(";"));else if(!s.startsWith("blob:")){const d=s.split("?")[0].slice(s.lastIndexOf(".")+1).toLowerCase();o=z.MIME_TYPES[d]||`video/${d}`}return a.src=s,o&&(a.type=o),new Promise(d=>{const l=async()=>{const h=new z({...r,resource:i});i.removeEventListener("canplay",l),e.data.preload&&await It(i),d(K(h,t,s))};r.preload&&!r.autoPlay&&i.load(),i.addEventListener("canplay",l),i.appendChild(a)})},unload(s){s.destroy(!0)}},we={extension:{type:p.ResolveParser,name:"resolveTexture"},test:ve.test,parse:s=>{var e;return{resolution:parseFloat(((e=j.RETINA_PREFIX.exec(s))==null?void 0:e[1])??"1"),format:s.split(".").pop(),src:s}}},kt={extension:{type:p.ResolveParser,priority:-2,name:"resolveJson"},test:s=>j.RETINA_PREFIX.test(s)&&s.endsWith(".json"),parse:we.parse};class Mt{constructor(){this._detections=[],this._initialized=!1,this.resolver=new j,this.loader=new st,this.cache=x,this._backgroundLoader=new He(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var n,a;if(this._initialized){v("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let o=e.manifest;typeof o=="string"&&(o=await this.load(o)),this.resolver.addManifest(o)}const t=((n=e.texturePreference)==null?void 0:n.resolution)??1,r=typeof t=="number"?[t]:t,i=await this._detectFormats({preferredFormats:(a=e.texturePreference)==null?void 0:a.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:i,resolution:r}}),e.preferences&&this.setPreferences(e.preferences),e.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...e.loadOptions})}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();const r=ue(e),i=O(e).map(o=>{if(typeof o!="string"){const u=this.resolver.getAlias(o);return u.some(c=>!this.resolver.hasKey(c))&&this.add(o),Array.isArray(u)?u[0]:u}return this.resolver.hasKey(o)||this.add({alias:o,src:o}),o}),n=this.resolver.resolve(i),a=await this._mapLoadToResolve(n,t);return r?a[i[0]]:a}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let r=!1;typeof e=="string"&&(r=!0,e=[e]);const i=this.resolver.resolveBundle(e),n={},a=Object.keys(i);let o=0;const u=[],c=()=>{t==null||t(u.reduce((l,h)=>l+h,0)/o)},d=a.map((l,h)=>{const f=i[l],g=Object.values(f),y=[...new Set(g.flat())].reduce((b,P)=>b+(P.progressSize||1),0);return u.push(0),o+=y,this._mapLoadToResolve(f,b=>{u[h]=b*y,c()}).then(b=>{n[l]=b})});return await Promise.all(d),r?n[e[0]]:n}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(r=>{this._backgroundLoader.add(Object.values(r))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return x.get(e);const t={};for(let r=0;r<e.length;r++)t[r]=x.get(e[r]);return t}async _mapLoadToResolve(e,t){const r=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const i=await this.loader.load(r,t);this._backgroundLoader.active=!0;const n={};return r.forEach(a=>{const o=i[a.src],u=[a.src];a.alias&&u.push(...a.alias),u.forEach(c=>{n[c]=o}),x.set(u,o)}),n}async unload(e){this._initialized||await this.init();const t=O(e).map(i=>typeof i!="string"?i.src:i),r=this.resolver.resolve(t);await this._unloadFromResolved(r)}async unloadBundle(e){this._initialized||await this.init(),e=O(e);const t=this.resolver.resolveBundle(e),r=Object.keys(t).map(i=>this._unloadFromResolved(t[i]));await Promise.all(r)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(r=>{x.remove(r.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const r of e.detections)e.skipDetections||await r.test()?t=await r.add(t):e.skipDetections||(t=await r.remove(t));return t=t.filter((r,i)=>t.indexOf(r)===i),t}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(r=>r in e).forEach(r=>{t.config[r]=e[r]})})}}const I=new Mt;C.handleByList(p.LoadParser,I.loader.parsers).handleByList(p.ResolveParser,I.resolver.parsers).handleByList(p.CacheParser,I.cache.parsers).handleByList(p.DetectionParser,I.detections);C.add(Ne,Ke,qe,tt,Ze,Je,et,nt,lt,mt,xt,ve,Lt,Ge,De,we,kt);const ae={loader:p.LoadParser,resolver:p.ResolveParser,cache:p.CacheParser,detection:p.DetectionParser};C.handle(p.Asset,s=>{const e=s.ref;Object.entries(ae).filter(([t])=>!!e[t]).forEach(([t,r])=>C.add(Object.assign(e[t],{extension:e[t].extension??r})))},s=>{const e=s.ref;Object.keys(ae).filter(t=>!!e[t]).forEach(t=>C.remove(e[t]))});const _e={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Rt=["in vec2 vBlurTexCoords[%size%];","uniform sampler2D uTexture;","out vec4 finalColor;","void main(void)","{","    finalColor = vec4(0.0);","    %blur%","}"].join(`
`);function zt(s){const e=_e[s],t=e.length;let r=Rt,i="";const n="finalColor += texture(uTexture, vBlurTexCoords[%index%]) * %value%;";let a;for(let o=0;o<s;o++){let u=n.replace("%index%",o.toString());a=o,o>=t&&(a=s-o-1),u=u.replace("%value%",e[a].toString()),i+=u,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",s.toString()),r}const Wt=`
    in vec2 aPosition;

    uniform float uStrength;

    out vec2 vBlurTexCoords[%size%];

    uniform vec4 uInputSize;
    uniform vec4 uOutputFrame;
    uniform vec4 uOutputTexture;

    vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;

    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

    vec2 filterTextureCoord( void )
    {
        return aPosition * (uOutputFrame.zw * uInputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        float pixelStrength = uInputSize.%dimension% * uStrength;

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function Ut(s,e){const t=Math.ceil(s/2);let r=Wt,i="",n;e?n="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * pixelStrength, 0.0);":n="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * pixelStrength);";for(let a=0;a<s;a++){let o=n.replace("%index%",a.toString());o=o.replace("%sampleIndex%",`${a-(t-1)}.0`),i+=o,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",s.toString()),r=r.replace("%dimension%",e?"z":"w"),r}function jt(s,e){const t=Ut(e,s),r=zt(e);return ke.from({vertex:t,fragment:r,name:`blur-${s?"horizontal":"vertical"}-pass-filter`})}var Vt=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlurUniforms {
  uStrength:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> blurUniforms : BlurUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    %blur-struct%
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}


@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {

  let filteredCord = filterTextureCoord(aPosition);

  let pixelStrength = gfu.uInputSize.%dimension% * blurUniforms.uStrength;

  return VSOutput(
   filterVertexPosition(aPosition),
    %blur-vertex-out%
  );
}

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  %blur-fragment-in%
) -> @location(0) vec4<f32> {

    var   finalColor = vec4(0.0);

    %blur-sampling%

    return finalColor;
}`;function $t(s,e){const t=_e[e],r=t.length,i=[],n=[],a=[];for(let l=0;l<e;l++){i[l]=`@location(${l}) offset${l}: vec2<f32>,`,s?n[l]=`filteredCord + vec2(${l-r+1} * pixelStrength, 0.0),`:n[l]=`filteredCord + vec2(0.0, ${l-r+1} * pixelStrength),`;const h=l<r?l:e-l-1,f=t[h].toString();a[l]=`finalColor += textureSample(uTexture, uSampler, offset${l}) * ${f};`}const o=i.join(`
`),u=n.join(`
`),c=a.join(`
`),d=Vt.replace("%blur-struct%",o).replace("%blur-vertex-out%",u).replace("%blur-fragment-in%",o).replace("%blur-sampling%",c).replace("%dimension%",s?"z":"w");return Me.from({vertex:{source:d,entryPoint:"mainVertex"},fragment:{source:d,entryPoint:"mainFragment"}})}const Pe=class Fe extends he{constructor(e){e={...Fe.defaultOptions,...e};const t=jt(e.horizontal,e.kernelSize),r=$t(e.horizontal,e.kernelSize);super({glProgram:t,gpuProgram:r,resources:{blurUniforms:{uStrength:{value:0,type:"f32"}}},...e}),this.horizontal=e.horizontal,this._quality=0,this.quality=e.quality,this.blur=e.strength,this._uniforms=this.resources.blurUniforms.uniforms}apply(e,t,r,i){if(this._uniforms.uStrength=this.strength/this.passes,this.passes===1)e.applyFilter(this,t,r,i);else{const n=U.getSameSizeTexture(t);let a=t,o=n;this._state.blend=!1;const u=e.renderer.type===pe.WEBGPU;for(let c=0;c<this.passes-1;c++){e.applyFilter(this,a,o,c===0?!0:u);const d=o;o=a,a=d}this._state.blend=!0,e.applyFilter(this,a,r,i),U.returnTexture(n)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}};Pe.defaultOptions={strength:8,quality:4,kernelSize:5};let G=Pe;class Se extends he{constructor(...e){let t=e[0]??{};typeof t=="number"&&(w(fe,"BlurFilter constructor params are now options object. See params: { strength, quality, resolution, kernelSize }"),t={strength:t},e[1]!==void 0&&(t.quality=e[1]),e[2]!==void 0&&(t.resolution=e[2]||"inherit"),e[3]!==void 0&&(t.kernelSize=e[3])),t={...G.defaultOptions,...t};const{strength:r,strengthX:i,strengthY:n,quality:a,...o}=t;super({...o,compatibleRenderers:pe.BOTH,resources:{}}),this._repeatEdgePixels=!1,this.blurXFilter=new G({horizontal:!0,...t}),this.blurYFilter=new G({horizontal:!1,...t}),this.quality=a,this.strengthX=i??r,this.strengthY=n??r,this.repeatEdgePixels=!1}apply(e,t,r,i){const n=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);if(n&&a){const o=U.getSameSizeTexture(t);this.blurXFilter.blendMode="normal",this.blurXFilter.apply(e,t,o,!0),this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(e,o,r,i),U.returnTexture(o)}else a?(this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(e,t,r,i)):(this.blurXFilter.blendMode=this.blendMode,this.blurXFilter.apply(e,t,r,i))}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.blur),Math.abs(this.blurYFilter.blur))*2}get strength(){if(this.strengthX!==this.strengthY)throw new Error("BlurFilter's strengthX and strengthY are different");return this.strengthX}set strength(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get strengthX(){return this.blurXFilter.blur}set strengthX(e){this.blurXFilter.blur=e,this.updatePadding()}get strengthY(){return this.blurYFilter.blur}set strengthY(e){this.blurYFilter.blur=e,this.updatePadding()}get blur(){return w("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength}set blur(e){w("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength=e}get blurX(){return w("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX}set blurX(e){w("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX=e}get blurY(){return w("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY}set blurY(e){w("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}Se.defaultOptions={strength:8,quality:4,kernelSize:5};class Xt extends Re{constructor(e,t){const{text:r,resolution:i,style:n,anchor:a,width:o,height:u,roundPixels:c,...d}=e;super({...d}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=t,this.text=r??"",this.style=n,this.resolution=i??null,this.allowChildren=!1,this._anchor=new ze({_onUpdate:()=>{this.onViewUpdate()}}),a&&(this.anchor=a),this.roundPixels=c??!1,o!==void 0&&(this.width=o),u!==void 0&&(this.height=u)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){var t;e||(e={}),(t=this._style)==null||t.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this.bounds.width),t!==void 0&&this._setHeight(t,this.bounds.height)}containsPoint(e){const t=this.bounds.width,r=this.bounds.height,i=-t*this.anchor.x;let n=0;return e.x>=i&&e.x<=i+t&&(n=-r*this.anchor.y,e.y>=n&&e.y<=n+r)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e=="boolean"?e:e!=null&&e.style)&&this._style.destroy(e),this._style=null,this._text=null}get styleKey(){return`${this._text}:${this._style.styleKey}:${this._resolution}`}}function Yt(s,e){let t=s[0]??{};return(typeof t=="string"||s[1])&&(w(fe,`use new ${e}({ text: "hi!", style }) instead`),t={text:t,style:s[1]}),t}class Dt extends Xt{constructor(...e){const t=Yt(e,"Text");super(t,ge),this.renderPipeId="text",t.textureStyle&&(this.textureStyle=t.textureStyle instanceof Z?t.textureStyle:new Z(t.textureStyle))}updateBounds(){const e=this._bounds,t=this._anchor;let r=0,i=0;if(this._style.trim){const{frame:n,canvasAndContext:a}=ee.getCanvasAndContext({text:this.text,style:this._style,resolution:1});ee.returnCanvasAndContext(a),r=n.width,i=n.height}else{const n=Xe.measureText(this._text,this._style);r=n.width,i=n.height}e.minX=-t._x*r,e.maxX=e.minX+r,e.minY=-t._y*i,e.maxY=e.minY+i}}me({Text:Dt});function Be(s){const{blurStrngth:e=1,text:t,x:r,y:i,fontSize:n}=s,a=k.useMemo(()=>new Se({strength:e}),[e]);return L.jsx("pixiText",{text:t,anchor:.5,x:r,y:i,filters:[a],style:new ge({align:"center",fill:"#ffffff",fontSize:n,letterSpacing:10,dropShadow:{color:"#E72264",distance:6}})})}Be.__docgenInfo={description:"",methods:[],displayName:"BluredText",props:{blurStrngth:{required:!1,tsType:{name:"number"},description:""},text:{required:!0,tsType:{name:"string"},description:""},x:{required:!0,tsType:{name:"number"},description:""},y:{required:!0,tsType:{name:"number"},description:""},fontSize:{required:!0,tsType:{name:"number"},description:""}}};me({Container:je,Sprite:Ue});function Gt({x:s,y:e}){const[t,r]=k.useState(M.EMPTY),[i,n]=k.useState(!1);return k.useEffect(()=>{t===M.EMPTY&&I.load("https://pixijs.com/assets/bunny.png").then(a=>r(a))},[t]),L.jsx("pixiSprite",{anchor:.5,eventMode:"static",onClick:()=>n(!i),scale:i?1:1.5,texture:t,x:s,y:e})}function Te({isPixi:s}){const{width:e,height:t}=We(),[r,i]=k.useState({x:e/2,y:t/2});if(!s)return null;const n=new H(0,0,e,t),a={text:"Hello World",x:e*.5,y:t*.75,fontSize:Math.sqrt(e*e+t*t)*.03},o=u=>{const{x:c,y:d}=u.global;i({x:c,y:d})};return L.jsxs("pixiContainer",{eventMode:"static",hitArea:n,onPointerMove:o,children:[L.jsx(Gt,{x:r.x,y:r.y}),L.jsx(Be,{...a})]})}Te.__docgenInfo={description:"",methods:[],displayName:"HelloWorld"};const es={title:"Scenes/HelloWorld",component:Te,parameters:{layout:"fullscreen"},decorators:[Ve]},R={args:{}};var oe,le,ce;R.parameters={...R.parameters,docs:{...(oe=R.parameters)==null?void 0:oe.docs,source:{originalSource:`{
  args: {}
}`,...(ce=(le=R.parameters)==null?void 0:le.docs)==null?void 0:ce.source}}};const ts=["Default"];export{R as Default,ts as __namedExportsOrder,es as default};
